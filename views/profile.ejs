<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Profile</title>
        <link rel="stylesheet" href="/css/styles.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    </head>

    <body data-page="profile">

        <%- include('partials/_sidebar') %>
        
        <div class="parent-container-center main-content padding-top-80">

            <div class="column-container main-content">
                <h3 class="primary-text heading-text black-text">My Profile</h3>
    
                <div class="row-container card-container width-auto space-between">
                    <img class="large-circle-image" src="<%= loggedInUser.profile %>" alt="Profile Image" onclick="openImagePopup()">
    
                    <p class="width-auto primary-text black-text"><%= loggedInUser.username || "YOU! CHEATER!!!" %></p>
    
                    <div class="width-100"></div>
                        <form action="/profile/update-profile" method="POST" enctype="multipart/form-data">
                            <input class="primary-text black-text" type="file" name="profileImage" accept="image/*" required>
                            <button type="submit" class="primary-text white-text btn-primary width-auto">Upload Profile Image</button>
                        </form>
                    </div>

                    
    
                <div class="card-container width-auto padding-bottom-20 padding-top-20">
                    <div>
                        <label for="username" class="form-label primary-text">Username</label>
                        <input type="text" class="form-control primary-text" id="profile-username" value=<%= loggedInUser.username || "You CHEATED! Shame on U, babi he he'3' " %> required>
                    </div>
        
                    <div>
                        <label for="password" class="form-label primary-text">Password</label>
                        <div class="form-control" id="profile-password">*****</div>
                    </div>
                </div>
    
                <div class="card-container width-auto padding-bottom-20 padding-top-20">
                    <div class="row-container space-between">
                        <div>
                            <h4 class="primary-text task-title-text margin-top-20">Change Password?</h4>
                            <p class="primary-small-text">Please check check-box to change password!</p>
                        </div>
    
                        <input type="checkbox" id="cbChangePassword" class="primary-text custom-checkbox">
                    </div>
        
    
                    <div>
                        <label class="form-label primary-text" for="newPassword">New password you want to change</label>
                        <input class="form-control primary-text" id="profile-newPassword" type="password" disabled required>
                    </div>
    
                    <div class="margin-bottom-20">
                        <label class="form-label primary-text" for="confirmedPassword">Confirm your new password</label>
                        <input class="form-control primary-text" id="profile-confirmedPassword" type="password" disabled required>
                    </div>
                </div>
    
    
                <div class="card-container gray-background width-auto padding-bottom-20 padding-top-20">
                    <h4 class="primary-text black-text task-title-text margin-top-20">For any changes you make, </h4>
                    <p class="primary-text black-text red-icon">Please enter your current password below to confirm you are the rightful owner of the account.</p>
    
                    <div class="margin-top-20 margin-bottom-20">
                        <label class="form-label primary-text" for="currentPassword">Enter your current password</label>
                        <input class="form-control primary-text" id="profile-currentPassword" type="password" required>
                    </div>
    
                    <button id="btnSaveChanges" class="primary-text white-text btn-primary w-100">Save Changes</button>
                </div>
            </div>

            
        </div>

        <div id="imagePopup" class="popup-overlay">
            <div class="popup-content">
                <span class="close-btn" onclick="closePopup('imagePopup')">&times;</span>
                <img alt="Full Profile Image" class="popup-image">
            </div>
        </div>

        <div id="toast" class="primary-text toast-hidden">Something to tell to the user</div>

        <script src="/js/script.js"></script>
    </body>
</html>